## Goal of the metric

The Gini coefficient metric quantifies the inequality of genres distribution of a recommendation list.

It aims to provide insights into the concentration of recommendations across a few genres versus a larger set of genres. The value of 1 indicates only one category having the probability mass (perfect inequality), while a value of 0 indicates all the categories are equally probable (perfect equality).

## Description

Consider a categorical data model with C categories, labelled as 1, ..., C having respective probabilities π1,... ,πC. If all the categories are equally probable, then there is no concentration so that the diversity is a maximum. In the other extreme case where one category has the unit probability and the others have all null probability, then there is a maximum concentration in one of the categories (or minimum diversity).

The computation of Gini requires item item_genres. The item item_genres should be provided as a dictionary using the format {item idx: item genres}, where the item idx corresponds to the internal item id used by the cornac system.

The item genres should be represented as an ordered list, where a value of 0 indicates that the item does not belong to a certain category at the corresponding position in the genre list, and 1 indicates that the item belong to a certain category.

In most cases, genres within their respective domains are not completely separate or isolated categories For example, “The Lord of the Rings” by Tolkien can be classified as "Adventure", "Fiction", "High fantasy" and "British literature" all at once.

As an example, if the candidate genres array contains 8 genres, such as "Comedies," "Dramas," "Romance," "Action," "Adventure," "Fiction," "High fantasy," and "British literature," the representation of "The Lord of the Rings" would be [0, 0, 0, 0, 1, 1, 1, 1].

## Parameters

**item_genre**: A dictionary that maps item indices to the item genres array(numpy array).

**k**: (Optional) Integer. Rank cutoff @N. The default value is -1. When using default value -1, all items in the recommendation lists are evaluated.

## Formula

Let L(u) be the Lorenz curve denoting the percentage of the recommendations
genres appeared by the lowest 100u% of items. The Gini coefficient is then defined as:

$G=1−2∫_0^1​L(u)du$.

For implementing this metric, we referred to the formulation from Ricci et al., 2015. 

$Gini = \frac {1}{|I|-1} \sum_{k=1} ^{|I|} (2k - N -1)p(i_k|s)$

where $p(i_k|s)$ is the probability of the k-th least recommended item being drawn from the recommendation lists generated by a system s: 

$p(i_k|s) = \frac {|\{u ∈ U |i  ∈ R_u\}|}{\sum_{j ∈ I}|\{u ∈ U | j ∈ R_u \}|}$

## References

Fleder, D. M., & Hosanagar, K. (2007, June). Recommender systems and their impact on sales diversity. In Proceedings of the 8th ACM conference on Electronic commerce (pp. 192-199).

Ricci, F., Rokach, L. and Shapira, B., 2015. Recommender systems: introduction and challenges. Recommender systems handbook, pp.1-34.
